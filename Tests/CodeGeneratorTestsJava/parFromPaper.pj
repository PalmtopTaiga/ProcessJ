proc void p1(chan<int>.read c) [yield=true]{

}

proc void p2(chan<int>.write c, int x) [yield=true]{

}

proc void p3(int y) [yield=true]{}
proc void p4(int z) [yield=true]{}

proc void foo(int x) [yield=true]{

  chan<int> c;

  par {
    p1(c.read);
    p2(c.write, x);
  }
  
  bar(10); 
  
  par {
  	p3(4);
  	p4(5);
  }
}

proc void bar(int y) [yield=false]{
	y = y+10;
}

proc void main(string[] args) {
	foo(5);
}
